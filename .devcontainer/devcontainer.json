{
	"name": "fullstack - Spacesuits dev container - devpod",
	"image": "mcr.microsoft.com/devcontainers/java:1-21-bullseye",

	// Additional features
	"features": {
		"ghcr.io/devcontainers/features/docker-in-docker:2": {},
		"ghcr.io/devcontainers-extra/features/angular-cli:2": {
			"version": "19.2.1"
		}
	},
	
	// Init & config
	"postCreateCommand": {
		"Install maven": "sudo apt-get update && sudo apt-get install -y maven && mvn -q -ntp dependency:go-offline",
		"Install Quarkus CLI": "curl -Ls https://sh.jbang.dev | bash -s - trust add https://repo1.maven.org/maven2/io/quarkus/quarkus-cli/curl -Ls https://sh.jbang.dev | bash -s - app install --fresh --force quarkus@quarkusio",
		"Compile backend": "cd backend/space-suit-back && mvn compile",
		"Install frontend deps": "cd front/spacesuit-status-front && npm i"
	},
	
	"forwardPorts": [ 8080, 4200, 8180 ],
	"portsAttributes": {
		"8080": {
			"label": "Quarkus App",
			"protocol": "http"
		},
		"8180": {
			"label": "Keycloak",
			"protocol": "http"
		},
		"4200": {
			"label": "Angular App",
			"protocol": "http"
		}
	},

	// IDE customizations
	"customizations": {
	  "vscode": {
			"settings": {
				"editor.tabSize": 2,
				"containers.containerClient": "com.microsoft.visualstudio.containers.docker",
				"containers.orchestratorClient": "com.microsoft.visualstudio.orchestrators.dockercompose",
				"containers.commands.runInteractive": "${containerCommand} run --rm -it ${exposedPorts} ${tag}"
			},
			"extensions": [
				"redhat.vscode-quarkus",
				"ms-azuretools.vscode-docker",
				"ms-azuretools.vscode-containers",
				"Angular.ng-template"
			]
	  }
	}
}